## Удалится ли из памяти o1 после возврата из функции? Если нет, то почему?

```
func Y() []*Object {
    o1 := Object{}
    o2 := Object{}
    a := []*Object{&o1, &o2}
    return a[1:]
}
```

# Задача нацелена на проверку знаний работы с памятью и сборщиком мусора в Go

## Объяснение:

Хотя o1 и o2 выглядят как локальные переменные, компилятор видит, что вы берёте их адреса и возвращаете их наружу внутри среза.
По результатам так называемого «escape analysis» эти объекты автоматически помещаются не на стек, а в кучу.
А возвращённый срез хранит ссылку на массив указателей, в котором лежит &o2 (и &o1 хотя бы косвенно).
Пока этот срез жив — живы и сами объекты.
Сборщик мусора их не уберёт, потому что они остаются достижимыми через возвращённый срез.

## Итого:

o1 и o2 не удаляются после выхода из функции, потому что их адреса «убегают» в кучу, и на них продолжает ссылаться возвращённый срез.